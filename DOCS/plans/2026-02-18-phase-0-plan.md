# ACTION PLAN: PHASE 0 — THE SEED

## Task 0.1: .grid Schema Definition 
  
  DO:
  - Write JSON Schema (draft-07) for .grid format v0.1.0
  - Define: meta, canvas, frames, cells, sequences, project
  - Document every field with type, required/optional, and purpose
  - Include 3 example .grid files (minimal, medium, complex)
  
  TEST:
  - Validate all 3 examples against schema using ajv
  - Intentionally break each field → confirm validation catches it
  - Round-trip: write JSON → parse → write → compare (identical)
  
  DOCUMENT:
  - grid-spec-v0.1.0.md (the format bible)
  - CHANGELOG.md (start it now)
  
  HANDOVER:
  "Anyone can read grid-spec-v0.1.0.md and write a valid .grid file
   by hand in a text editor without seeing any code."

---

## Task 0.2: grid-core.js — Pure Logic Library

  DO:
  - Implement in vanilla JS (ESM module, zero dependencies)
  - Functions:
    createGrid(width, height, charset, defaultColor) → Grid
    createFrame(grid) → Frame
    setCell(frame, x, y, {char, color, density, semantic, channel}) → Frame
    getCell(frame, x, y) → Cell
    getCellsByChannel(frame, channelName) → Cell[]
    getDensityMap(frame) → number[][] (2D array, 0-1)
    getSemanticMap(frame) → string[][] 
    getColorMap(frame) → string[][]
    addFrame(grid, frame) → Grid
    removeFrame(grid, frameId) → Grid
    serializeGrid(grid) → string (JSON)
    deserializeGrid(jsonString) → Grid
    validateGrid(grid) → { valid: boolean, errors: string[] }
  - All functions are PURE — no mutation, no side effects, no DOM
  
  TEST:
  - Unit tests for every function (at least 3 cases each)
  - Edge cases: empty grid, single cell, max size (1000x1000)
  - Serialize → deserialize → deep equal check
  - Performance: create 200x100 grid in < 50ms
  
  DOCUMENT:
  - JSDoc on every function
  - grid-core-api.md with usage examples
  
  HANDOVER:
  "grid-core.js can be imported into ANY project (Node, browser, 
   Deno) and used to create, manipulate, and validate .grid files
   without any rendering or UI dependency."

---

## Task 0.3: Canvas2D Minimal Renderer

  DO:
  - canvas-renderer.js (ESM module)
  - Takes: Grid + target <canvas> element
  - Renders current frame:
    - Each cell → character drawn at grid position
    - Color from cell.color
    - Brightness modulated by cell.density
    - Configurable font size and family
  - Frame navigation: next(), prev(), goTo(frameIndex)
  - Animation: play(fps), pause(), stop()
  
  TEST:
  - Render a 40x20 grid at 60fps → no frame drops
  - Render same grid at font size 8 and 24 → correct scaling
  - Animation plays through all frames and loops
  - Renders correctly on Chrome, Firefox, Safari
  
  DOCUMENT:
  - canvas-renderer-api.md
  
  HANDOVER:
  "canvas-renderer.js takes any valid Grid object and draws it.
   It knows nothing about music, 3D, AI, or narratives."

---

## Task 0.4: Single HTML Proof-of-Life

  DO:
  - index.html — SINGLE FILE, inline everything
  - Includes: grid-core.js + canvas-renderer.js (inlined)
  - UI:
    - Grid canvas (click to place characters)
    - Character palette (charset selector)
    - Color picker (8 colors minimum)
    - Frame management (add, delete, navigate)
    - Play/pause animation
    - Speed control
    - Procedural generators (port spiral, wave, mandala, noise, geometric)
    - Export .grid JSON (download)
    - Import .grid JSON (file picker)
  - Generators populate ALL cell channels (not just char+color)
    - density calculated from character weight
    - semantic inferred from character class
  - Mobile responsive
  - Offline capable (no external resources)
  
  TEST:
  - Open on phone (Android Chrome) → create, edit, save, reload
  - Open on desktop → same file, same features
  - Export .grid → open in text editor → human readable
  - Import .grid → renders correctly
  - Kill network → everything still works
  - File size < 200KB
  
  DOCUMENT:
  - README.md for the HTML file
  - Inline comments explaining architecture
  
  HANDOVER:
  "Email this HTML file to anyone. They double-click it. It works.
   No install, no server, no build step, no internet."

---

## Task 0.5: Test Suite & Validation

  DO:
  - test-grid-core.js — runs in browser console OR Node
  - Schema validation using lightweight ajv subset (inline)
  - Test runner: simple pass/fail with console output
  - Coverage: every grid-core function, every schema rule
  
  TEST:
  - Run in Node: `node test-grid-core.js` → all green
  - Run in browser console: paste → all green
  - Break schema intentionally → errors caught with clear messages
  
  DOCUMENT:
  - test-results.md (snapshot of passing tests)
  - testing-strategy.md (how tests are structured for future phases)
  
  HANDOVER:
  "Run the tests. If green, Phase 0 is complete. 
   Phase 1 can begin with confidence that the format holds."